---
title: "JS and TS Tips"
emoji: "ğŸ“š"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["javascript", "typescript"]
published: true
publication_name: "gmomedia"
---


## ã¯ã˜ã‚ã«

:::message
ä¿®æ­£ã‚„è¿½åŠ ç­‰ã¯ã‚³ãƒ¡ãƒ³ãƒˆã¾ãŸã¯GitHubã§ç·¨é›†ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ãŠå¾…ã¡ã—ã¦ãŠã‚Šã¾ã™ã€‚
:::

ã®ã‚“ã³ã‚Šæ›´æ–°ã—ã¦ã„ãã¾ã™ã€‚

## æ¦‚è¦

JSã¨TSã®Tipsã‚’ã¾ã¨ã‚ã¾ã™ã€‚
ç°¡å˜ãªã‚‚ã®ã‹ã‚‰é›£ã—ã„ã‚‚ã®ã¾ã§ã‚’ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚

## åˆ†å‰²ä»£å…¥(ãƒ‡ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ãƒªãƒ³ã‚°)

åˆ†å‰²ä»£å…¥ã§ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚„é…åˆ—ã®ä¸­èº«ã‚’å–ã‚Šå‡ºã™ã¨åŒæ™‚ã«å¤‰æ•°ã«ä»£å…¥ã§ãã¾ã™ã€‚

### é€£æƒ³é…åˆ—ã®å ´åˆ

é€£æƒ³é…åˆ—ã®å ´åˆã¯ã€ã‚­ãƒ¼ã‚’æŒ‡å®šã—ã¦å–ã‚Šå‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚
ã‚­ãƒ¼ã«åˆ¥åã‚’ã¤ã‘ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

```js:destructuring.js
const obj = { a: 1, b: 2, c: 3 };
const { a, b, c: d } = obj; // cã‚’dã¨ã—ã¦å–ã‚Šå‡ºã™

console.log(a, b, d); // 1 2 3
```

:::details TypeScript

```ts:destructuring.ts
const obj = { a: 1, b: 2, c: 3 };
const { a, b, c: d } = obj; // cã‚’dã¨ã—ã¦å–ã‚Šå‡ºã™

console.log(a, b, d); // 1 2 3
```

:::

### é…åˆ—ã®å ´åˆ

é…åˆ—ã®å ´åˆã¯ã€é †ç•ªã«å–ã‚Šå‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚
å¿…ãšã—ã‚‚å…¨ã¦ã®è¦ç´ ã‚’å–ã‚Šå‡ºã™å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
`[a, b]` ã®ã‚ˆã†ã«ã€å–ã‚Šå‡ºã—ãŸã„è¦ç´ ã®ã¿ã‚’æŒ‡å®šã§ãã¾ã™ã€‚
ã¾ãŸã€`[a, ...b]` ã®ã‚ˆã†ã«ã€`...` ã‚’ä½¿ã£ã¦æ®‹ã‚Šã®è¦ç´ ã‚’å–ã‚Šå‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚
`[, , c]` ã®ã‚ˆã†ã«ã€å–ã‚Šå‡ºã—ãŸã„è¦ç´ ã®å‰ã« `,` ã‚’ã¤ã‘ã‚‹ã“ã¨ã§ã€ãã®è¦ç´ ã‚’ã‚¹ã‚­ãƒƒãƒ—ã§ãã¾ã™ã€‚

```js:destructuring.js
const arr = [1, 2, 3];

const [a, b] = arr; // 1, 2ã‚’å–ã‚Šå‡ºã™
const [, , c] = arr; // 3ã‚’å–ã‚Šå‡ºã™
const [, ...d] = arr; // 1ä»¥å¤–ã‚’å–ã‚Šå‡ºã™

console.log(a, b, c, d); // 1 2 3 [2, 3]
```

:::details TypeScript

```ts:destructuring.ts
const arr = [1, 2, 3];

const [a, b] = arr; // 1, 2ã‚’å–ã‚Šå‡ºã™
const [, , c] = arr; // 3ã‚’å–ã‚Šå‡ºã™
const [, ...d] = arr; // 1ä»¥å¤–ã‚’å–ã‚Šå‡ºã™

console.log(a, b, c, d); // 1 2 3 [2, 3]
```

## æµ…ã„ã‚³ãƒ”ãƒ¼ã¨æ·±ã„ã‚³ãƒ”ãƒ¼

æµ…ã„ã‚³ãƒ”ãƒ¼ã¨æ·±ã„ã‚³ãƒ”ãƒ¼ã¯Cè¨€èªã‚’ã‚„ã£ãŸã“ã¨ãŒã‚ã‚‹äººãªã‚‰ã€é¦´æŸ“ã¿ã®ã‚ã‚‹è¨€è‘‰ã ã¨æ€ã„ã¾ã™ã€‚

### æµ…ã„ã‚³ãƒ”ãƒ¼

æµ…ã„ã‚³ãƒ”ãƒ¼ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å‚ç…§ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚
å¤‰æ•°ã¯ã‚ˆãç®±ã¨ä¾‹ãˆã‚‰ã‚Œã¾ã™ãŒã€å‚ç…§ã¯ç®±ãŒã‚ã‚‹å ´æ‰€ã‚’æŒ‡ã—ã¦ã„ã‚‹ã¨è€ƒãˆã‚‹ã¨ã‚ã‹ã‚Šã‚„ã™ã„ã¨æ€ã„ã¾ã™ã€‚

```js:shallowCopy.js
const obj = { a: 1, b: 2 };
const shallowCopy = obj;

shallowCopy.a = 2;

console.log(obj); // { a: 2, b: 2 }
```

:::details TypeScript

```ts:shallowCopy.ts
const obj = { a: 1, b: 2 };
const shallowCopy = obj;

shallowCopy.a = 2;

console.log(obj); // { a: 2, b: 2 }
```

:::

ç®±ã®å ´æ‰€ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã„ã‚‹ãŸã‚ã€`shallowCopy` ã‚’å¤‰æ›´ã™ã‚‹ã¨ã€`obj` ã‚‚å¤‰æ›´ã•ã‚Œã¾ã™ã€‚
å ´æ‰€ã—ã‹çŸ¥ã‚‰ãªã„ã®ã§ã€åŒã˜ç®±ã«æ›¸ãè¾¼ã‚“ã§ã—ã¾ã£ãŸã¨è€ƒãˆã‚‹ã¨ã‚ã‹ã‚Šã‚„ã™ã„ã¨æ€ã„ã¾ã™ã€‚

### æ·±ã„ã‚³ãƒ”ãƒ¼

æ·±ã„ã‚³ãƒ”ãƒ¼ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å€¤ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚
ç®±è‡ªä½“ã‚’å¢—ã‚„ã™ã¨è€ƒãˆã‚‹ã¨ã‚ã‹ã‚Šã‚„ã™ã„ã¨æ€ã„ã¾ã™ã€‚

```js:deepCopy.js
const obj = { a: 1, b: 2 };
const deepCopy = { ...obj };

deepCopy.a = 2;

console.log(obj); // { a: 1, b: 2 }
```

:::details TypeScript

```ts:deepCopy.ts
const obj = { a: 1, b: 2 };
const deepCopy = { ...obj }; // or Object.assign({}, obj)

deepCopy.a = 2;

console.log(obj); // { a: 1, b: 2 }
```

:::

`{...obj}` ã®ã€€`...` ã¯ã€ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰æ§‹æ–‡ã¨å‘¼ã°ã‚Œã€é…åˆ—ã‚„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å±•é–‹ã§ãã¾ã™ã€‚
`Object.assign` ã‚’ä½¿ã£ã¦ã‚‚åŒã˜ã“ã¨ãŒã§ãã¾ã™ãŒã€åˆ†å‰²ä»£å…¥ã®æ–¹ãŒç°¡æ½”ã«æ›¸ã‘ã‚‹ã®ã§ã€ã“ã¡ã‚‰ã‚’ä½¿ã†ã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚

## æœ‰ç†æ•°ã§ã‚ã‚‹ã‹åˆ¤å®šã™ã‚‹

æœ‰ç†æ•°ã‹ã©ã†ã‹ã‚’åˆ¤å®šã™ã‚‹ã¨ãã«ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã§ã¯ä¸å…·åˆãŒç™ºç”Ÿã—ã¾ã™ã€‚

```js:isNumber.js
const isNumber = (num) => {
  if (isFinite(num)) {
    console.log("num is truthy");
  } else {
    console.log("num is falsy");
  }
};

isNumber(NaN); // num is falsy
isNumber(Infinity); // num is falsy
isNumber(null); // id is truthy
isNumber("1"); // id is truthy
```

:::details TypeScript

```ts:isNumber.ts
const isNumber = (num: unkown) => {
  if (isFinite(num as number)) {
    console.log("num is truthy");
  } else {
    console.log("num is falsy");
  }
};

isNumber(NaN); // num is falsy
isNumber(Infinity); // num is falsy
isNumber(null); // id is truthy
isNumber("1"); // id is truthy
```

:::

ã“ã‚Œã¯ã€jsã®ä»•æ§˜ã§ã€`isFinite` ã¯ `Infinity` or `NaN` or `undefined` oré€£æƒ³é…åˆ—(`{}`) ã®å ´åˆã« `false` ã‚’è¿”ã—ã¾ã™ã€‚
ãã‚Œä»¥å¤–ã®å ´åˆã¯ã€`true` ã‚’è¿”ã—ã¾ã™ã€‚
ã“ã®ã‚ˆã†ãªå ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«åˆ¤å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```js:isNumber.js
const isNumber = (num) => {
  if (Number.isFinite(num)) {
    console.log("num is truthy");
  } else {
    console.log("num is falsy");
  }
};
```

:::details TypeScript

```ts:isNumber.ts
const isNumber = (num: unknown) => {
  if (Number.isFinite(num)) {
    console.log("num is truthy");
  } else {
    console.log("num is falsy");
  }
};
```

:::

`Number.isFinite` ã¯ã€`isFinite` ã¨ç•°ãªã‚Šã€æ•°å€¤å‹ã«å¯¾ã—ã¦ã®ã¿ `true` ã‚’è¿”ã—ã¾ã™ã€‚
`Infinity` or `NaN` ã¯ `false` ã‚’è¿”ã—ã¾ã™ã€‚

### typeofã§ã¯ãƒ€ãƒ¡ãªã®ã‹

`typeof` ã§ã‚‚åˆ¤å®šã§ããã†ã§ã™ãŒã€ä»¥ä¸‹ã®ã‚ˆã†ãªè½ã¨ã—ç©´ãŒã‚ã‚Šã¾ã™ã€‚

```js:isNumber.js
const isNumber = (num) => {
  if (typeof num === "number") {
    console.log("num is truthy");
  } else {
    console.log("num is falsy");
  }
};

isNumber(NaN); // num is truthy
isNumber(Infinity); // num is truthy
isNumber(null); // num is falsy
isNumber("1"); // num is falsy
```

:::details TypeScript

```ts:isNumber.ts
const isNumber = (num: unknown) => {
  if (typeof num === "number") {
    console.log("num is truthy");
  } else {
    console.log("num is falsy");
  }
};

isNumber(NaN); // num is truthy
isNumber(Infinity); // num is truthy
isNumber(null); // num is falsy
isNumber("1"); // num is falsy
```

:::

`Infinity` ã¨ `NaN` ã¯ `number` å‹ã§ã‚ã‚‹ãŸã‚ã€`true` ã‚’è¿”ã—ã¾ã™ã€‚
ãã®ãŸã‚ã€æœ‰ç†æ•°ã‹ã©ã†ã‹ã‚’åˆ¤å®šã™ã‚‹å ´åˆã¯ã€`Number.isFinite` ã‚’ä½¿ã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

### å‹ã‚’çµã‚Šè¾¼ã‚ã‚‹ã‚ˆã†ã«ã™ã‚‹

ä»¥ä¸‹ã®é–¢æ•°ã§ã¯ã€`x` ãŒ `number` å‹ã§ã‚ã‚‹ã“ã¨ã‚’ä¿è¨¼ã§ãã¾ã›ã‚“ã€‚
äººã®ç›®ã§è¦‹ã‚Œã°ã€`x` ã¯ `number` å‹ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ãŒã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã¯ `x` ãŒ `unknown` å‹ã§ã‚ã‚‹ã¨åˆ¤æ–­ã—ã¾ã™ã€‚

```ts:isNumber.ts
const isNumber = (num: unknown) => {
  if (Number.isFinite(num)) {
    return true;
  } else {
    return false;
  }
};
const x: unknown = 1;

if (isNumber(x)) {
  console.log(x.toFixed(2)); // x is unknown
}
```

`x` ãŒ `number` å‹ã§ã‚ã‚‹ã“ã¨ã‚’ä¿è¨¼ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ã„ã¾ã™ã€‚

```ts:isNumber.ts
const isNumber = (num: unknown): num is number => {
  if (Number.isFinite(num)) {
    return true;
  } else {
    return false;
  }
};

const x: unknown = 1;

if (isNumber(x)) {
  console.log(x.toFixed(2)); // x is number
}
```

`is` ã‚’ä½¿ã†ã“ã¨ã§ã€å·¦è¾ºãŒå³è¾ºã®å‹ã§ã‚ã‚‹ã“ã¨ã‚’ä¿è¨¼ã§ãã¾ã™ã€‚

## é…åˆ—ã‚’åˆ¤å®šã™ã‚‹

é…åˆ—ã¯ `typeof` ã§ `object` ã¨åˆ¤å®šã•ã‚Œã¾ã™ã€‚
ä¸€è¦‹ã™ã‚‹ã¨ã€åˆ¤å®šã§ããã†ã§ã™ã€‚
ã§ã™ãŒã€`typeof` ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªè½ã¨ã—ç©´ãŒã‚ã‚Šã¾ã™ã€‚

```js:isArray.js
const isArray = (arr) => {
  if (typeof arr === "object") {
    console.log("arr is truthy");
  } else {
    console.log("arr is falsy");
  }
};

isArray([]); // arr is truthy
isArray({}); // arr is truthy
isArray(null); // arr is truthy
```

:::details TypeScript

```ts:isArray.ts
const isArray = (arr: unknown) => {
  if (typeof arr === "object") {
    console.log("arr is truthy");
  } else {
    console.log("arr is falsy");
  }
};

isArray([]); // arr is truthy
isArray({}); // arr is truthy
isArray(null); // arr is truthy
```

:::

ã“ã®é–¢æ•°ã« `null` oré€£æƒ³é…åˆ—(`{}`) ã‚’æ¸¡ã™ã¨ã€`true` ã¨ãªã‚Šã¾ã™ã€‚
ã“ã‚Œã¯ã€`null` ã¨ã€€é€£æƒ³é…åˆ—(`{}`) ãŒ `object` ã§ã‚ã‚‹ãŸã‚ã§ã™ã€‚

ã“ã®ã‚ˆã†ãªå ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«åˆ¤å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```js:isArray.js
const isArray = (arr) => {
  if (Array.isArray(arr)) {
    console.log("arr is truthy");
  } else {
    console.log("arr is falsy");
  }
};
```

:::details TypeScript

```ts:isArray.ts
const isArray = (arr: unknown) => {
  if (Array.isArray(arr)) {
    console.log("arr is truthy");
  } else {
    console.log("arr is falsy");
  }
};
```

:::

`Array.isArray` ã¯ã€`typeof` ã¨ç•°ãªã‚Šã€`null` ã‚„é€£æƒ³é…åˆ—(`{}`)ã‚’ `false` ã¨ã—ã¦åˆ¤å®šã—ã¾ã™ã€‚

## ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã®ä»•æ§˜

### ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã¯ã€é–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚ŒãŸæ™‚ã«è©•ä¾¡ã•ã‚Œã‚‹

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã¯ã€é–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚ŒãŸæ™‚ã«è©•ä¾¡ã•ã‚Œã¾ã™ã€‚
è¨€ã„æ›ãˆã‚‹ãªã‚‰æ¯å›åˆæœŸåŒ–ã•ã‚Œã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚

```js:defaultArgs.js
const defaultArgs = (value, arr = []) => {
  arr.push(value);
  console.log(arr);
};

defaultArgs(1); // [1]
defaultArgs(2); // [2]
```

:::details TypeScript

```ts:defaultArgs.ts
const defaultArgs = (value: number, arr: number[] = []) => {
  arr.push(value);
  console.log(arr);
};

defaultArgs(1); // [1]
defaultArgs(2); // [2]
```

:::

### å‰ã®å¼•æ•°ã‚’å¾Œã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã§ä½¿ãˆã‚‹

å‰ã®å¼•æ•°ã‚’ä½¿ã£ã¦ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã‚’è¨­å®šã§ãã¾ã™ã€‚

```js:defaultArgs.js
const defaultArgs = (a, b = a) => {
  console.log(a, b);
};

defaultArgs(1); // 1 1
defaultArgs(1, 2); // 1 2
```

:::details TypeScript

```ts:defaultArgs.ts
const defaultArgs = (a: number, b: number = a) => {
  console.log(a, b);
};

defaultArgs(1); // 1 1
defaultArgs(1, 2); // 1 2
```

:::

## floatå‹ã‚’åˆ¤å®šã™ã‚‹

JavaScriptã«ã¯ã€`float` å‹ãŒã‚ã‚Šã¾ã›ã‚“ã€‚
å…¨ã¦ `number` å‹ã§ã™ã€‚
JavaScriptã«ã¯æ•°å€¤ã®åˆ¤å®šç³»ãƒ¡ã‚½ãƒƒãƒ‰ãŒãŸãã•ã‚“ã‚ã‚Šã¾ã™ãŒã€ãã®ä¸­ã§ã€`isFinite` ã¨ `Number.isFinite` ã¯ `float` å‹ã‚’åˆ¤å®šã§ãã¾ã™ã€‚
ä»Šå›ã¯æ•°å€¤ã® `float` å‹ã‚’åˆ¤å®šã—ãŸã„ã®ã§ã€`Number.isFinite` ã‚’ä½¿ã„ã¾ã™ã€‚

```js:isFloat.js
const isFloat = (num) => {
  if (Number.isFinite(num)) {
    console.log("num is truthy");
  } else {
    console.log("num is falsy");
  }
};

isFloat(1.1); // num is truthy
isFloat("1.1"); // num is falsy
```

:::details TypeScript

```ts:isFloat.ts
const isFloat = (num: unknown) => {
  if (Number.isFinite(num)) {
    console.log("num is truthy");
  } else {
    console.log("num is falsy");
  }
};
```

:::

ã†ã¾ãã„ã£ã¦ãã†ã§ã™ãŒã€`Number.isFinite` ã¯æœ‰ç†æ•°ã‚’åˆ¤å®šã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ãªã®ã§ã€æ•´æ•°ã‚‚ `true` ã¨åˆ¤å®šã—ã¦ã—ã¾ã„ã¾ã™ã€‚
ã“ã‚Œã‚’å›é¿ã™ã‚‹ã«ã¯ã€`Number.isInteger` ã‚’ä½¿ã„ã¾ã™ã€‚
`Number.isInteger` ã¯ã€æ•´æ•°ã‚’åˆ¤å®šã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã§ã™ã€‚

```js:isFloat.js
const isFloat = (num) => {
  if (Number.isFinite(num) && !Number.isInteger(num)) {
    console.log("num is truthy");
  } else {
    console.log("num is falsy");
  }
};

isFloat(1.1); // num is truthy
isFloat("1.1"); // num is falsy
```

:::details TypeScript

```ts:isFloat.ts
const isFloat = (num: unknown) => {
  if (Number.isFinite(num) && !Number.isInteger(num)) {
    console.log("num is truthy");
  } else {
    console.log("num is falsy");
  }
};

isFloat(1.1); // num is truthy
isFloat("1.1"); // num is falsy
```

:::

floatå‹ã¯æœ‰ç†æ•°ã‹ã¤ã€æ•´æ•°ã§ãªã„æ•°å€¤ã¨ãªã‚‹ãŸã‚ã€`Number.isFinite` ã¨ `Number.isInteger` ã‚’ä½¿ã£ã¦åˆ¤å®šã§ãã¾ã™ã€‚

## ã“ã®å…ˆå·¥äº‹ä¸­ğŸš§

(æœ€çµ‚æ›´æ–°æ—¥ï¼š 2023-09-08)
