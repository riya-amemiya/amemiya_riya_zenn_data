---
title: "Reactã§ã‚ˆãä½¿ã†å‹å®šç¾©"
emoji: "ğŸ§¶"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["react", "typescript"]
published: true
publication_name: "gmomedia"
---

## ã¯ã˜ã‚ã«

:::message
ä¿®æ­£ã‚„è¿½åŠ ç­‰ã¯ã‚³ãƒ¡ãƒ³ãƒˆã¾ãŸã¯GitHubã§ç·¨é›†ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ãŠå¾…ã¡ã—ã¦ãŠã‚Šã¾ã™ã€‚
:::

éšæ™‚æ›´æ–°ã—ã¦ã„ãã¾ã™ã€‚

## onSubmitã®target

formè¦ç´ ã®onSubmitã‚¤ãƒ™ãƒ³ãƒˆã®targetã¯ã€nameå±æ€§ãŒå‹å®šç¾©ã•ã‚Œã¦ã„ãªã„ã®ã§ã€å‹å®šç¾©ã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```tsx
const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {
  e.preventDefault(); // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æŒ™å‹•ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«
  // nameå±æ€§ã‚’æŒ‡å®šã—ã¦ã„ã‚‹inputè¦ç´ ã®å€¤ã‚’å–å¾—
  const target = e.target as typeof e.target & {
    email: { value: string };
    password: { value: string };
  };
  const email = target.email.value; // type: string
  const password = target.password.value; // type: string
};

return (
  <form onSubmit={handleSubmit}>
    <input type="email" name="email" />
    <input type="password" name="password" />
    <button type="submit">ãƒ­ã‚°ã‚¤ãƒ³</button>
  </form>
)
```

## Buttonã®type

aã‚¿ã‚°ã®å­è¦ç´ ã¨ã—ã¦buttonè¦ç´ ã‚’ä½¿ã†ã®ã¯ã€HTMLã®ä»•æ§˜ä¸Šã€è¨±å¯ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
ãã®ãŸã‚ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåŒ–ã—ãŸå ´åˆã¯hrefå±æ€§ã‚’propsã¨ã—ã¦å—ã‘å–ã‚Šã¤ã¤ã€hrefã®æœ‰ç„¡ã§aã‚¿ã‚°ã‹buttonè¦ç´ ã‚’å‡ºã—åˆ†ã‘ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ã‚¢ãƒ­ãƒ¼é–¢æ•°ã§ã¯ãªãã€functionå®£è¨€ã§æ›¸ãã¨ã€é–¢æ•°ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã‚’ä½¿ã£ã¦ã€å‹å®šç¾©ã‚’ç°¡æ½”ã«æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚

:::details ä¿®æ­£å‰

```tsx
import {
  AnchorHTMLAttributes,
  ButtonHTMLAttributes,
  DetailedHTMLProps,
} from "react";

function Button(
  props: DetailedHTMLProps<
    ButtonHTMLAttributes<HTMLButtonElement>,
    HTMLButtonElement
  >,
): JSX.Element;
function Button(
  props: DetailedHTMLProps<
    AnchorHTMLAttributes<HTMLAnchorElement>,
    HTMLAnchorElement
  >,
): JSX.Element;
function Button(
  props:
    | DetailedHTMLProps<
        ButtonHTMLAttributes<HTMLButtonElement>,
        HTMLButtonElement
      >
    | DetailedHTMLProps<
        AnchorHTMLAttributes<HTMLAnchorElement>,
        HTMLAnchorElement
      >,
): JSX.Element {
  if ("href" in props) {
    return <a href={props.href} {...props} />;
  } else {
    const { ...buttonProps } = props as DetailedHTMLProps<
      ButtonHTMLAttributes<HTMLButtonElement>,
      HTMLButtonElement
    >;
    return <button type={buttonProps.type || "button"} {...buttonProps} />;
  }
}

export default Button;
```

:::

ã‚‚ã£ã¨ç°¡æ½”ã«æ›¸ã‘ã‚‹ã¨ã”æŒ‡æ‘˜ã‚’ã„ãŸã ãã¾ã—ãŸã®ã§ã€ä¿®æ­£ã—ã¾ã—ãŸã€‚
ã‚³ãƒ¡ãƒ³ãƒˆã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼

### ComponentPropsWithoutRefã‚’ä½¿ã£ãŸå ´åˆ

```tsx
import type { ComponentPropsWithoutRef } from "react";

function Button(props: ComponentPropsWithoutRef<"a">): JSX.Element;
function Button(props: ComponentPropsWithoutRef<"button">): JSX.Element;
function Button(
  props: ComponentPropsWithoutRef<"button"> | ComponentPropsWithoutRef<"a">,
): JSX.Element {
  if ("href" in props) {
    return <a href={props.href} {...props} />;
  } else {
    const { ...buttonProps } = props as ComponentPropsWithoutRef<"button">;
    return <button type={buttonProps.type || "button"} {...buttonProps} />;
  }
}

export default Button;
```

### JSX.IntrinsicElementsã‚’ä½¿ã£ãŸå ´åˆ

```tsx
function Button(props: JSX.IntrinsicElements["a"]): JSX.Element;
function Button(props: JSX.IntrinsicElements["button"]): JSX.Element;
function Button(
  props: JSX.IntrinsicElements["button"] | JSX.IntrinsicElements["a"],
): JSX.Element {
  if ("href" in props) {
    return <a href={props.href} {...props} />;
  } else {
    const { ...buttonProps } = props as JSX.IntrinsicElements["button"];
    return <button type={buttonProps.type || "button"} {...buttonProps} />;
  }
}

export default Button;
```

## useStateã®å‹å®šç¾©

useStateã§åˆæœŸå€¤ã‚’ `[]` ã‚„ `{}` ã§åˆæœŸåŒ–ã™ã‚‹ã¨ã€å‹æ¨è«–ãŒåŠ¹ã‹ãªã„ã®ã§ã€æ˜ç¤ºçš„ã«å‹å®šç¾©ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```tsx
const [count, setCount] = useState(0); // type: number
const [text, setText] = useState(""); // type: string
const [flag, setFlag] = useState(false); // type: boolean
const [counts, setCounts] = useState<number[]>([]); // []ã§åˆæœŸåŒ–ã™ã‚‹ã¨ã€å‹æ¨è«–ãŒåŠ¹ã‹ãªã„ã®ã§ã€æ˜ç¤ºçš„ã«å‹å®šç¾©ã™ã‚‹
```

## fetchã®å‹å®šç¾©

fetchã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’json()ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã£ã¦ã€jsonå½¢å¼ã«å¤‰æ›ã—ãŸå ´åˆã€å‹æ¨è«–ãŒåŠ¹ã‹ãªã„ã®ã§ã€æ˜ç¤ºçš„ã«å‹å®šç¾©ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```tsx
const [data, setData] = useState<DataType[]>([]); // []ã§åˆæœŸåŒ–ã™ã‚‹ã¨ã€å‹æ¨è«–ãŒåŠ¹ã‹ãªã„ã®ã§ã€æ˜ç¤ºçš„ã«å‹å®šç¾©ã™ã‚‹

useEffect(() => {
  fetch("https://example.com/api")
    .then((res) => res.json())
    .then((data) => setData(data));
}, []);
```

### useSWRã‚’ä½¿ã£ãŸå ´åˆ

useSWRã®å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å‹å®šç¾©ã™ã‚‹ã“ã¨ã§ã€å‹æ¨è«–ãŒåŠ¹ãã¾ã™ã€‚

```tsx
const { data, error } = useSWR<DataType[]>("https://example.com/api");
```

### Next.jsã®Server Componentsã‚’ä½¿ã£ãŸå ´åˆ

Next.jsã®Server Componentsã‚’ä½¿ã£ãŸå ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å‹å®šç¾©ã™ã‚‹ã“ã¨ã§ã€å‹æ¨è«–ãŒåŠ¹ãã¾ã™ã€‚

```tsx
export default async function Page() {
    const data: DataType[] = await fetch("https://example.com/api").then((res) => res.json());
    return <Component data={data} />;
}
```

## ã“ã®å…ˆå·¥äº‹ä¸­ğŸš§

(æœ€çµ‚æ›´æ–°æ—¥ï¼š 2023-08-27)
