---
title: "ChatGPTã®Assistantä½¿ã£ã¦ã¿ãŸï¼"
emoji: "ğŸ¡"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["chatgpt", "gpt4", "ai"]
published: true
publication_name: "gmomedia"
---

## ã¯ã˜ã‚ã«

:::message
ä¿®æ­£ã‚„è¿½åŠ ç­‰ã¯ã‚³ãƒ¡ãƒ³ãƒˆã¾ãŸã¯GitHubã§ç·¨é›†ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ãŠå¾…ã¡ã—ã¦ãŠã‚Šã¾ã™ã€‚
:::

https://platform.openai.com/docs/assistants/overview

## æ¦‚è¦

ç‰¹å®šã®æŒ‡ç¤ºã«å¾“ã£ãŸã‚Šã€çŸ¥è­˜ã‚’è¿½åŠ ã—ã¦æ´»ç”¨ã—ãŸã‚Šã€ä»–ã®ãƒ„ãƒ¼ãƒ«ã¨é€£æºã—ã¦ã•ã¾ã–ã¾ãªã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã§ãã‚‹AIã‚’ä½œã‚Œã¾ã™ï¼

## æ—©é€ŸéŠã‚“ã§ã¿ã‚‹

ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’ã‚„ã£ã¦ã¿ã¾ã™ã€‚

https://platform.openai.com/docs/assistants/overview

ã¾ãšã¯Assistantã‚’ä½œã‚Šã¾ã™ã€‚
ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã•ã‚ŒãŸChatGPTã ã¨æ€ã£ã¦ãã ã•ã„ã€‚

```py:assistantCreate.py
from dotenv import load_dotenv
from openai import OpenAI

load_dotenv()


client = OpenAI()

assistant = client.beta.assistants.create(
    name="Math Tutor",
    instructions="You are a personal math tutor. Write and run code to answer math questions.",
    tools=[{"type": "code_interpreter"}],
    model="gpt-4-1106-preview",
)
print(assistant.id)
```

ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯å…ˆã§è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
å…ˆã»ã©è¡¨ç¤ºã•ã‚ŒãŸidã‚’ãƒ¡ãƒ¢ã—ã¦ãŠãã¾ã™ã€‚
ä½•å›ã‚‚å®Ÿè¡Œã™ã‚‹ã¨ã€AssistantãŒå¢—ãˆã¦ç®¡ç†ãŒå¤§å¤‰ã«ãªã‚‹ã®ã§ã€æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

https://platform.openai.com/assistants

æ¬¡ã«Assistantã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```py:assistantRun.py
from dotenv import load_dotenv
from openai import OpenAI

load_dotenv()


client = OpenAI()

# ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’ä½œæˆ
thread = client.beta.threads.create()

# ã‚¹ãƒ¬ãƒƒãƒ‰ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿½åŠ 
message = client.beta.threads.messages.create(
    thread_id=thread.id,
    role="user",
    content="I need to solve the equation `3x + 11 = 14`. Can you help me?",
)

# ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’å®Ÿè¡Œ
run = client.beta.threads.runs.create(
    thread_id=thread.id,
    # ã•ã£ããƒ¡ãƒ¢ã—ãŸidã‚’å…¥ã‚Œã‚‹
    assistant_id="assistantã®id"
    instructions="Please address the user as Jane Doe. The user has a premium account.",
)

print(run.id, thread.id)
```

ã“ã‚Œã ã‘ã§ã€å®Ÿè¡Œã§ãã¾ã—ãŸï¼
Assistantã®å®Ÿè¡Œã¯éåŒæœŸã§è¡Œã‚ã‚Œã‚‹ãŸã‚ã€çµæœã¯ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã§å–å¾—ã§ãã¾ã™ã€‚

```py:assistantResult.py
from dotenv import load_dotenv
from openai import OpenAI

load_dotenv()


client = OpenAI()
status = "queued"

# å®Ÿè¡ŒãŒå®Œäº†ã™ã‚‹ã¾ã§å¾…ã¤
while status != "completed":
    # ã‚¹ãƒ¬ãƒƒãƒ‰ã®å®Ÿè¡Œçµæœã‚’å–å¾—
    run = client.beta.threads.runs.retrieve(
        thread_id="threadã®id",
        run_id="runã®id",
    )
    status = run.status

messages = client.beta.threads.messages.list(
    thread_id="threadã®id",
)

# æœ€æ–°ã®å¿œç­”ãŒæœ€åˆã«å…¥ã£ã¦ã„ã‚‹ã®ã§ã€é€†é †ã«ã™ã‚‹
for message in reversed(messages.data):
    print(message.content[0].text.value)

```

ä»Šå›ã®å ´åˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

```txt
I need to solve the equation `3x + 11 = 14`. Can you help me?

The solution to the equation \(3x + 11 = 14\) is \(x = 1\).
```

## ã¾ã¨ã‚

ä»Šå›ã¯Assistantã‚’ä½¿ã£ã¦ã¿ã¾ã—ãŸã€‚
Code Interpreterã€Function callingã€Knowledge Retrievalã®3ã¤ã®ãƒ„ãƒ¼ãƒ«ãŒã‚ã‚Šã€ãã‚Œãã‚Œã®ãƒ„ãƒ¼ãƒ«ã‚’çµ„ã¿åˆã‚ã›ã¦Assistantã‚’ä½œã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
å¯èƒ½æ€§ã¯ç„¡é™å¤§ã§ã€ã©ã‚“ãªã“ã¨ã§ã‚‚ã§ããã†ã§ã™ã­ï¼
æœ€æ–°ç‰ˆã®GPT-4 TurboãŒé€Ÿã„ã€å®‰ã„ã€è³¢ã„ + Assistantã§ã¾ã•ã«é¬¼ã«é‡‘æ£’ã€‚
