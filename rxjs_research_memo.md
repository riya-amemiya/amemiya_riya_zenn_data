# RxJS 記事作成用リサーチメモ

## RxJSとは

RxJS（Reactive Extensions for JavaScript）は、リアクティブプログラミングをJavaScriptで実現するためのライブラリ。
非同期処理やイベント駆動処理を「ストリーム」という概念で統一的に扱う。

## リアクティブプログラミングの核心

「すべてはストリームである（Everything is a stream）」がリアクティブプログラミングの禅（核心）。
変数で考えるのではなく、「時間の経過とともに発生するデータの流れ」で考える。

### ストリームとは

- 時間の経過とともに利用可能になるデータ要素のシーケンス
- コンベアベルト上のアイテムが一つずつ処理されていくイメージ
- 3種類の出力：値、エラー、完了シグナル

## RxJSの6つの基本コンセプト

### 1. Observable（オブザーバブル）
- 「データプロデューサー」として機能
- 時間をかけて複数の値を発行できる（Promiseは1つの値のみ）
- イベント、API応答、タイマーなど様々なデータソースを表現

### 2. Observer（オブザーバー）
- 「データコンシューマー」として機能
- 3つのコールバック：next（値の受け取り）、error（エラー処理）、complete（完了処理）
- subscribe()を通じてObservableを購読

### 3. Subscription（サブスクリプション）
- Observableの実行を表すオブジェクト
- unsubscribe()で購読を解除（メモリリーク防止に重要）

### 4. Operators（オペレーター）
- 純粋関数としてストリームを変換
- map、filter、mergeMap、switchMapなど

### 5. Subject（サブジェクト）
- ObservableとObserver両方の性質を持つ
- 複数のObserverにマルチキャストできる
- 「発行(publish)」と「購読(subscribe)」を1つのオブジェクトに集約

### 6. Schedulers（スケジューラー）
- 非同期処理のタイミングを制御

## 主要なオペレーター

### 変換系
- **map**: 各値を新しい値に変換
- **mergeMap**: 内部Observableを並列で処理（書き込み操作向け）
- **switchMap**: 新しい値で前の処理をキャンセル（タイプアヘッド向け）
- **concatMap**: 順番に処理（順序が重要な場合）
- **exhaustMap**: 処理中は新しい値を無視

### フィルタリング系
- **filter**: 条件に合う値のみ通す
- **take**: 最初のn個の値のみ
- **debounceTime**: 一定時間入力がない時に発行
- **distinctUntilChanged**: 前回と異なる値のみ

### 結合系
- **merge**: 複数のストリームを統合
- **combineLatest**: 最新の値を組み合わせ
- **forkJoin**: すべてが完了した時に値を発行

## Promiseとの比較

| 項目 | Promise | Observable |
|------|---------|------------|
| 値の数 | 単一値 | 複数値（時間経過で） |
| 遅延評価 | 即時実行 | subscribe時に実行 |
| キャンセル | 不可 | unsubscribe()で可能 |
| オペレーター | 限定的 | 豊富 |

## マーブルダイアグラム

ストリームの振る舞いを視覚化する表現方法。
- 横軸：時間
- 丸：発行される値
- X：エラー
- |：完了

## ユースケース

1. ユーザー入力（タイプアヘッド検索）
2. WebSocket接続
3. DOM イベント処理
4. HTTP リクエストの管理
5. 状態管理（NgRx, etc.）
